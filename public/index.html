<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RaDIM</title>
    <link rel="stylesheet" href="/style.css">
    <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet'>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <div class="logo-left">
            <a href="/index.html">
                <img src="/images/logo_aplikace.png" alt="Logo" class="logo-image">  <!-- Lev√© logo -->
            </a>
            <span class="logo-text">RaDIM</span> <!-- Text vedle loga vlevo -->
        </div>

        <nav class="nav-container">
            <div class="nav-links">
                <a href="/app.html" data-i18n="nav.app">APLIKACE</a>
                <a href="/about.html" data-i18n="nav.about">O PROJEKTU</a>
                <a href="/test.html" data-i18n="nav.test">TEST</a>

                <div class="language-buttons">
                    <button id="btn-cs">üá®üáø</button>
                    <button id="btn-en">üá¨üáß</button>
                    <button id="btn-de">üá©üá™</button>
                </div>
            </div>

            <!-- Hamburger ikonka, viditeln√° jen v mal√©m rozli≈°en√≠ -->
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>    

    <section id="hero">
        <div class="animated-logo">
            <span class="word" id="word1">Room acoustics</span>
            <span class="word" id="word2">Distance</span>
            <span class="word" id="word3">Instrument</span>
            <span class="word" id="word4">Microphone</span>
        </div>
        <p class="hero-text1">
            Room acoustics - Distance - Instrument - Microphone
        </p>
        <p data-i18n="index.welcome" class="hero-text2">
            Interaktivn√≠ webov√° aplikace urƒçen√° pro studenty a profesion√°ly v oblasti zvukov√© tvorby, kter√° umo≈æ≈àuje detailn√≠ zkoum√°n√≠ vlivu vzd√°lenosti mikrofonu, smƒõrov√© charakteristiky a akustick√©ho prost≈ôed√≠ na v√Ωsledn√Ω zvukov√Ω z√°znam.
        </p>
    </section>   

    <footer>
        <!-- Feedback container -->
        <button id="feedback-button" data-i18n="index.feedback.button">Feedback</button>
        <div id="feedback-container" class="feedback-container">
        <form id="feedback-form" class="feedback-form" action="/submit_feedback" method="POST">
            <div class="feedback-header">
            <h2 data-i18n="index.feedback.title">Zpƒõtn√° vazba</h2>
            <p data-i18n="index.feedback.description">
                D√≠ky za Va≈°i zpƒõtnou vazbu. D√≠ky n√≠ dok√°≈æu aplikaci vylep≈°it. Hodnocen√≠: 1 nejlep≈°√≠, 5 nejhor≈°√≠
            </p>
            </div>
            
            <label for="environment_comment" data-i18n="index.feedback.label_environment">
            Jak na V√°s p≈Øsob√≠ prost≈ôed√≠ aplikace?
            </label>
            <div class="rating-scale">
                <div class="rating-options">
                    <input type="radio" id="env1" name="environment_rating" value="1"><label for="env1">1</label>
                    <input type="radio" id="env2" name="environment_rating" value="2"><label for="env2">2</label>
                    <input type="radio" id="env3" name="environment_rating" value="3"><label for="env3">3</label>
                    <input type="radio" id="env4" name="environment_rating" value="4"><label for="env4">4</label>
                    <input type="radio" id="env5" name="environment_rating" value="5"><label for="env5">5</label>
                </div>
            </div>
            <textarea id="environment_comment" name="environment_comment" rows="4"
            placeholder="Prvn√≠ dojem, plynulost, design..."
            data-i18n-placeholder="index.feedback.placeholder_environment"></textarea>



            <label for="intuitive_comment" data-i18n="index.feedback.label_intuitive">
            Je ovl√°d√°n√≠ aplikace intuitivn√≠?
            </label>
            <div class="rating-scale">
                <div class="rating-options">
                    <input type="radio" id="int1" name="intuitive_rating" value="1"><label for="int1">1</label>
                    <input type="radio" id="int2" name="intuitive_rating" value="2"><label for="int2">2</label>
                    <input type="radio" id="int3" name="intuitive_rating" value="3"><label for="int3">3</label>
                    <input type="radio" id="int4" name="intuitive_rating" value="4"><label for="int4">4</label>
                    <input type="radio" id="int5" name="intuitive_rating" value="5"><label for="int5">5</label>
                </div>
            </div>
            <textarea id="intuitive_comment" name="intuitive_comment" rows="4"
            placeholder="Ovl√°d√°n√≠ vzd√°lenosti, smƒõrov√© charakteristiky a prostoru. P≈ôehr√°v√°n√≠, loop..."
            data-i18n-placeholder="index.feedback.placeholder_intuitive"></textarea>



            <label for="audio_comment" data-i18n="index.feedback.label_audio">
            Jsou pro V√°s audio vzorky dostaƒçuj√≠c√≠?
            </label>
            <div class="rating-scale">
                <div class="rating-options">
                    <input type="radio" id="audio1" name="audio_rating" value="1"><label for="audio1">1</label>
                    <input type="radio" id="audio2" name="audio_rating" value="2"><label for="audio2">2</label>
                    <input type="radio" id="audio3" name="audio_rating" value="3"><label for="audio3">3</label>
                    <input type="radio" id="audio4" name="audio_rating" value="4"><label for="audio4">4</label>
                    <input type="radio" id="audio5" name="audio_rating" value="5"><label for="audio5">5</label>
                </div>
            </div>
            <textarea id="audio_comment" name="audio_comment" rows="4"
            placeholder="Hudebn√≠ n√°stroje, zvolen√© prostory, vzd√°lenosti..."
            data-i18n-placeholder="index.feedback.placeholder_audio"></textarea>



            <label for="likes" data-i18n="index.feedback.label_missing_param">
            Je nƒõjak√Ω zvukov√Ω nebo hudebn√≠ parametr, kter√Ω V√°m v uk√°zk√°ch chyb√≠?
            </label>
            <textarea id="likes" name="likes" rows="4"
            placeholder="Dynamick√Ω a frekvenƒçn√≠ rozsah, d√©lka vzork≈Ø, hudebn√≠ uk√°zky..."
            data-i18n-placeholder="index.feedback.placeholder_missing_param"></textarea>
            


            <label for="dislikes" data-i18n="index.feedback.label_change">
            Co byste na aplikaci zmƒõnili?
            </label>
            <textarea id="dislikes" name="dislikes" rows="4"
            placeholder="Napi≈°te, co byste zmƒõnili..."
            data-i18n-placeholder="index.feedback.placeholder_change"></textarea>
            


            <label for="missing" data-i18n="index.feedback.label_missing">
            Co v√°m v aplikaci chyb√≠?
            </label>
            <textarea id="missing" name="missing" rows="4"
            placeholder="Napi≈°te, co byste p≈ôidali..."
            data-i18n-placeholder="index.feedback.placeholder_missing"></textarea>


            
            <label data-i18n="index.feedback.label_rating">Hodnocen√≠ aplikace:</label>
            <div class="rating">
            <input type="radio" id="star5" name="rating" value="5">
            <label for="star5">‚òÜ</label>
            <input type="radio" id="star4" name="rating" value="4">
            <label for="star4">‚òÜ</label>
            <input type="radio" id="star3" name="rating" value="3">
            <label for="star3">‚òÜ</label>
            <input type="radio" id="star2" name="rating" value="2">
            <label for="star2">‚òÜ</label>
            <input type="radio" id="star1" name="rating" value="1">
            <label for="star1">‚òÜ</label>
            </div>
            
            <label for="additional" data-i18n="index.feedback.label_additional">
            Dal≈°√≠ p≈ôipom√≠nky:
            </label>
            <textarea id="additional" name="additional" rows="3"
            placeholder="Dal≈°√≠ koment√°≈ôe..."
            data-i18n-placeholder="index.feedback.placeholder_additional"></textarea>
            
            <input type="submit" value="Odeslat zpƒõtnou vazbu"
            data-i18n-value="index.feedback.submit">
            
            <!-- Kontejner pro potvrzovac√≠ zpr√°vu -->
            <div id="feedback-message" class="hidden" data-i18n="index.feedback.confirmation">
            Zpƒõtn√° vazba ulo≈æena!
            </div>
        </form>
        </div>
        <p data-i18n="footer">2025 Studijn√≠ aplikace RaDIM</p>
        <p>Juraj Mi≈°ejka</p>
    </footer>

    <script>
        // Script pro logo na hlavn√≠ str√°nce
        const words = document.querySelectorAll(".animated-logo .word");
        let currentIndex = 0;

        function animateWords() {
            if (currentIndex < words.length) {
                words[currentIndex].classList.add("active"); // Aktivuje animaci pro aktu√°ln√≠ slovo
                currentIndex++;
                setTimeout(animateWords, 500); // ƒåas mezi jednotliv√Ωmi slovy
            } else {
                // Po dokonƒçen√≠ zobrazen√≠ v≈°ech slov zv√Ωrazn√≠me prvn√≠ p√≠smena
                highlightInitials();
            }
        }

        function highlightInitials() {
            words.forEach((word) => {
                const text = word.textContent;
                const parts = text.split(" ");
                const highlightedParts = parts.map(part => {
                    return `<span class="highlight">${part.charAt(0)}</span><span class="fade">${part.slice(1)}</span>`;
                });
                word.innerHTML = highlightedParts.join(" ");
            });

            // Po mal√© pauze spust√≠me "zv√Ωraznƒõn√≠"
            setTimeout(() => {
                // 1) Zv√Ωrazn√≠me prvn√≠ p√≠smena
                document.querySelectorAll(".highlight").forEach(letter => {
                    letter.classList.add("show");
                });
                // 2) Ostatn√≠ p√≠smena vyblednou (opacity: 0, width: 0)
                document.querySelectorAll(".fade").forEach(fadedLetter => {
                    fadedLetter.classList.add("dim");
                });

                // Po 1s vyblednut√≠...
                setTimeout(() => {

                    // 1) Sebereme v≈°echna highlight p√≠smena a doƒçasnƒõ vypneme transition
                    const highlightLetters = Array.from(document.querySelectorAll(".highlight"));
                    highlightLetters.forEach(letter => {
                        // Vypneme pro jistotu animace
                        letter.style.transition = "none";
                    });

                    // 2) Zmƒõ≈ô√≠me star√© (F) polohy
                    const firstPositions = highlightLetters.map(letter => {
                        const rect = letter.getBoundingClientRect();
                        return {
                            letter,
                            top: rect.top,
                            left: rect.left
                        };
                    });

                    // 3) Odstran√≠me .fade z DOM
                    document.querySelectorAll(".fade.dim").forEach(fadedLetter => {
                        fadedLetter.remove();
                    });

                    // 4) Zmƒõ≈ô√≠me nov√© (L) polohy
                    const lastPositions = highlightLetters.map(letter => {
                        const rect = letter.getBoundingClientRect();
                        return {
                            letter,
                            top: rect.top,
                            left: rect.left
                        };
                    });

                    // 5) [I] Invert: nastav√≠me transform, aby se tv√°≈ôily, ≈æe z≈Østaly v p≈Øvodn√≠ poloze
                    highlightLetters.forEach((_, i) => {
                        const dx = firstPositions[i].left - lastPositions[i].left;
                        const dy = firstPositions[i].top - lastPositions[i].top;
                        highlightLetters[i].style.transform = `translate(${dx}px, ${dy}px)`;
                    });

                    // 6) Vynut√≠me reflow, aby se prohl√≠≈æeƒç vykreslil s t√≠mto `transform: translate(...)`
                    highlightLetters.forEach(letter => {
                        
                    });

                    // 7) V dal≈°√≠m frame teprve pust√≠me animaci do nov√© polohy (Play)
                    requestAnimationFrame(() => {
                        highlightLetters.forEach(letter => {
                            // Teƒè u≈æ zapneme transition
                            letter.style.transition = "transform 0.8s ease";
                            // Plynul√Ω p≈ôesun do translate(0,0)
                            letter.style.transform = "translate(0,0)";
                        });
                    });

                    // Nap≈ô√≠klad na √∫pln√©m konci highlightInitials()
                    setTimeout(() => {
                        // P≈ôidat t≈ô√≠du .show na odstavec
                        const paramText = document.querySelector(".hero-text1");
                        paramText.classList.add("show");
                        // Druh√Ω ≈ô√°dek o 1 vte≈ôinu pozdƒõji
                        setTimeout(() => {
                            document.querySelectorAll(".hero-text2").forEach(element => {
                            element.classList.add("show");
                            });
                        }, 1000);
                    }, 1000);
                }, 1000); 
            }, 1000);
        }

        // Spust√≠ animaci po naƒçten√≠ str√°nky
        window.onload = () => {
            animateWords();
        };



        // Script na feedback okno
        document.getElementById("feedback-button").addEventListener("click", function() {
            document.getElementById("feedback-container").classList.toggle("active");
        });

        document.addEventListener("click", function(event) {
            const feedbackContainer = document.getElementById("feedback-container");
            const feedbackButton = document.getElementById("feedback-button");
            
            // Pokud je okno aktivn√≠ a kliknut√≠ nastalo mimo feedback container a tlaƒç√≠tko
            if (feedbackContainer.classList.contains("active") &&
                !feedbackContainer.contains(event.target) &&
                !feedbackButton.contains(event.target)) {
                feedbackContainer.classList.remove("active");
            }
        });

        document.addEventListener("DOMContentLoaded", function () {
            const feedbackForm = document.querySelector('.feedback-form');

            if (feedbackForm) {
                feedbackForm.addEventListener('submit', function (event) {
                    event.preventDefault();

                    const formData = new FormData(feedbackForm);

                    // üìå SPR√ÅVN√â Google Forms URL (p≈ôevod na formResponse)
                    const googleFormURL = "https://docs.google.com/forms/d/e/1FAIpQLScayiHvKoh7I30HwQMyaD9VR-TNv4suTJT-M43wHCem_T0pOQ/formResponse";

                    // üìå Spr√°vn√© entry ID podle console logu z Forms
                    const formEntries = new URLSearchParams();
                    formEntries.append("entry.1223161553", formData.get("environment_comment")); 
                    formEntries.append("entry.1686892940", formData.get("intuitive_comment"));
                    formEntries.append("entry.1804598012", formData.get("audio_comment"));
                    formEntries.append("entry.2016282161", formData.get("likes")); 
                    formEntries.append("entry.1677924439", formData.get("dislikes"));
                    formEntries.append("entry.503162501", formData.get("missing")); 
                    formEntries.append("entry.1847528374", formData.get("additional")); 
                    formEntries.append("entry.1384975669", formData.get("environment_rating"));  
                    formEntries.append("entry.639190130", formData.get("intuitive_rating"));  
                    formEntries.append("entry.169762161", formData.get("audio_rating"));  
                    formEntries.append("entry.1220857185", formData.get("rating"));  

                    // üìå P≈ôid√°n√≠ nutn√Ωch hidden hodnot pro Google Forms
                    formEntries.append("fvv", "1");  
                    formEntries.append("partialResponse", "[null,null,\"-4251843240326713782\"]");
                    formEntries.append("pageHistory", "0");
                    formEntries.append("fbzx", "-4251843240326713782");

                    fetch(googleFormURL, {
                        method: "POST",
                        mode: "no-cors",
                        body: formEntries,
                    })
                    .then(() => {
                        console.log("‚úÖ Odesl√°no do Google Forms!");
                        alert("Dƒõkujeme za zpƒõtnou vazbu! üòä");
                        feedbackForm.reset();
                    })
                    .catch(error => {
                        console.error("‚ùå Chyba p≈ôi odes√≠l√°n√≠:", error);
                        alert("Chyba p≈ôi odes√≠l√°n√≠ zpƒõtn√© vazby! üò¢");
                    });
                });
            }
        });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/23.7.3/i18next.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next-http-backend/2.2.0/i18nextHttpBackend.min.js"></script>

    <script type="module" src="/scripts/main.js"></script>
</body>
</html>